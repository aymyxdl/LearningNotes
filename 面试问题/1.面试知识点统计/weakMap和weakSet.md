Set(集合)、Map(字典)、WeakSet、WeakMap
如果要用一句来描述，我们可以说 Set是一种叫做集合的数据结构，Map是一种叫做字典的数据结构


那什么是集合？什么又是字典呢？

集合
集合，是由一堆无序的、相关联的，且不重复的内存结构【数学中称为元素】组成的组合

字典
字典（dictionary）是一些元素的集合。每个元素有一个称作key 的域，不同元素的key 各不相同

那么集合和字典又有什么区别呢？

共同点：集合、字典都可以存储不重复的值
不同点：集合是以[值，值]的形式存储元素，字典是以[键，值]的形式存储


-----


WeakSet
WeakSet 对象是一些对象值的集合, 并且其中的每个对象值都只能出现一次。在WeakSet的集合中是唯一的(唯一)
WeakSet 的出现主要解决弱引用对象存储的场景, 其结构与Set类似



与Set的区别
与Set相比，WeakSet 只能是对象的集合，而不能是任何类型的任意值(只能是对象)
WeakSet集合中对象的引用为弱引用。 如果没有其他的对WeakSet中对象的引用，那么这些对象会被当成垃圾回收掉。 (弱引用)
这也意味着WeakSet中没有存储当前对象的列表。 正因为这样，WeakSet 是不可枚举的(不可枚举)

WeakSet 的属性跟操作方法与 Set 一致，不同的是 WeakSet 没有遍历方法，因为其成员都是弱引用，弱引用随时都会消失，遍历机制无法保证成员的存在



上面一直有提到弱引用，那弱引用到底是指什么呢？(什么是弱引用)
弱引用是指不能确保其引用的对象不会被垃圾回收器回收的引用，换句话说就是可能在任意时间被回收



-----


WeakMap
WeakMap 对象是一组键/值对的集合，其中的键是弱引用的。其键必须是对象，而值可以是任意的(必须是对象)


与Map的区别
Map 的键可以是任意类型，WeakMap 的键只能是对象类型
WeakMap 键名所指向的对象，不计入垃圾回收机制
WeakMap 的属性跟操作方法与 Map 一致，同 WeakSet 一样，因为是弱引用，所以 WeakSet 也没有遍历方法(不能遍历)



-----


总结

Set、Map、WeakSet、WeakMap、都是一种集合的数据结构
Set、WeakSet 是[值,值]的集合，且具有唯一性
Map 和 WeakMap 是一种[键,值]的集合，Map 的键可以是任意类型，WeakMap 的键只能是对象类型
Set 和 Map 有遍历方法，WeakSet 和 WeakMap 属于弱引用不可遍历





应用场景：看他们说是用来解决存储dom节点：DOM节点被移除时自动释放此成员键，不用担心这些节点从文档移除时会引发内存泄漏
或者虚拟dom渲染上树的时候，可以及时的清理垃圾对象



----



为什么vue3使用weakMap和weakSet?


因为 weakMap和weakSet是弱引用的：
1.他们在源码中用来做缓冲区：防止对象被反复代理
2.防止内存泄漏，因为数组如果存了某个对象，那么即使其他地方没有了引用，也不会被当作垃圾回收.





